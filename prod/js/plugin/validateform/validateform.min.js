!function(a){"use strict";var b=function(){};b.prototype.init=function(){var a=this;this.dealActions(),$("body").find('[type="submit"]').on("click",function(b){var c=$(this).closest(a.options.form);c.length&&1!=a.validateForm(c)&&b.preventDefault()})},b.prototype.validateForm=function(a){var b=!0,c=this;return a.find("[data-validate]").each(function(){var d=$(this).attr("data-validate").toLowerCase()||$(this).attr("type").toLowerCase();$(this).val();if($(this).is(":visible")||"hidden"==d)if(c.validate.hasOwnProperty(d)){if(b=c.validate[d]($(this)),c.warnCli(d,$(this),b),1!=b)return $(document).trigger("cfw_validateForm_error",[a,d,$(this),b]),!1}else console.warn("´"+d+"´ não é um tipo de validação existente");else console.warn("elementId: #"+$(this).attr("id")+";\nvalidate: "+d+";\nisHidden: true;")}),b},b.prototype.validate={clearStr:function(a){return a.replace(/[^\w]/gi,"")},charsDistinct:function(a){return!a.match(/^(\d)\1*$/)},checkOptional:function(a,b){return"true"==a.attr("data-validate-optional")&&!this.required(a)||b()},required:function(a){return!!this.clearStr(a.val().trim())},fullname:function(a){return this.checkOptional(a,function(){return a.val().trim().split(" ").length>1})},email:function(a){return this.checkOptional(a,function(){var b=new RegExp(/^[A-Za-z0-9_\-\.]+@[A-Za-z0-9_\-\.]{2,}\.[A-Za-z0-9]{2,}(\.[A-Za-z0-9])?/);return!!b.test(a.val().trim())})},cpf:function(a){var b=this;return b.checkOptional(a,function(){var c=b.clearStr(a.val());if(11!=c.length||!b.charsDistinct(c))return!1;for(var d=0,e=0;e<9;e++)d+=parseInt(c.charAt(e))*(10-e);var f=11-d%11;if(10!=f&&11!=f||(f=0),f!=parseInt(c.charAt(9)))return!1;for(var d=0,e=0;e<10;e++)d+=parseInt(c.charAt(e))*(11-e);var f=11-d%11;return 10!=f&&11!=f||(f=0),f==parseInt(c.charAt(10))})},cnpj:function(a){var b=this;return b.checkOptional(a,function(){var c=b.clearStr(a.val());if(14!=c.length||!b.charsDistinct(c))return!1;for(var d=c.length-2,e=c.substring(0,d),f=c.substring(d),g=0,h=d-7,i=d;i>=1;i--)g+=e.charAt(d-i)*h--,h<2&&(h=9);var j=g%11<2?0:11-g%11;if(j!=f.charAt(0))return!1;var d=d+1,e=c.substring(0,d),g=0,h=d-7;for(i=d;i>=1;i--)g+=e.charAt(d-i)*h--,h<2&&(h=9);var j=g%11<2?0:11-g%11;return j==f.charAt(1)})},url:function(a){return this.checkOptional(a,function(){var b=new RegExp(/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,}))\.?)(?::\d{2,5})?(?:[\/?#]\S*)?$/i);return!!b.test(a.val().trim())})},file:function(a){if(window.FileReader&&window.FileReader.prototype.readAsArrayBuffer){var b=a[0].files;if(b.length>0){if(+a.attr("data-validate-size")<Math.ceil(b[0].size/1024))return"file_size";var c=b[0].name.substr(-3),d=a.attr("data-validate-ext")||c;return!(d.indexOf(c)<0)||"file_ext"}return"true"==a.attr("data-validate-optional")}return console.warn("FileReader API Not Supported"),!0},compare:function(a){var b=a.attr("data-validate-group"),c=this;if(!b)return console.warn("Obrigatório parametro ´data-validate-group´ com a validação ´Compare´"),!0;if(b){var d,e=$("[data-validate-group]:visible"),f=!0;return $.each(e,function(){if(!f)return!1;var b=c.clearStr($(this).val());"true"==a.attr("data-validate-optional")||b?"undefined"==typeof d?d=b:d!=b&&(f=!1):f=!1}),f}},checkbox:function(a){var b=a.attr("name"),c=a.attr("data-validate-qtd").split(",")[0],d=a.attr("data-validate-qtd").split(",")[1]||$('input[name="'+b+'"]').length,e=$('input[name="'+b+'"]:checked:visible').length;return b?e?e>=c&&e<=d:!e&&"true"==a.attr("data-validate-optional")||void 0:(console.warn("´checkbox´ precisa de um name."),!0)},hidden:function(a){return!!this.required(a)},radio:function(a){var b=a.attr("name");return b?!!$('input[name="'+b+'"]:checked:visible').length:(console.warn("´radio´ precisa de um name."),!0)}},b.prototype.warnCli=function(a,b,c){if(1!=c){var d={required:{false:"Campo obrigatório"},fullname:{false:"Preencha com seu Nome Completo (Nome Sobrenome)"},email:{false:"Utilize um email válido"},cpf:{false:"CPF inválido"},cnpj:{false:"CNPJ inválido"},url:{false:"URL inválida"},file:{false:"Campo obrigatório",file_size:"Tamanho do arquivo excedeu {size}Mb",file_ext:"Extensão do arquivo não permitida, envie: {ext}"},compare:{false:"Os valores dos campos devem ser iguais"},checkbox:{false:"Selecione ao menos {qtd} itens"},hidden:{false:"Campo obrigatório"},radio:{false:"Selecione uma opção"}},e=b.attr("data-validate-txt")||d[a][c];if(e.indexOf("{")>0){var f,g=new RegExp(/({[\w]+})/gi),h=e.match(g);switch(h[0]){case"{size}":f=+b.attr("data-validate-size")/1024;break;case"{qtd}":var i=b.attr("data-validate-qtd").split(",");f=i[0],i[1]&&(f+=" e no máximo "+i[1]);break;default:f=b.attr("data-validate-"+h[0].replace(/[{}]/g,""))}e=e.replace(h[0],f)}b.focus();var j=b.attr("data-validate-target")?b.closest(b.attr("data-validate-target")):b.parent();j.addClass("cfw-input-invalid"),this.options.tooltip&&j.attr("data-cfw-tooltip",e)}1==c&&this.resetWarn(b)},b.prototype.resetWarn=function(a){a.closest(this.options.form).find(".cfw-input-invalid").removeClass("cfw-input-invalid").removeAttr("data-cfw-tooltip")},b.prototype.dealActions=function(){var a=$(this.options.form),b=this;a.on("keypress","input, select, textarea",function(a){13==a.keyCode?(a.preventDefault(),$(this).closest(b.options.form).find("[type=submit]:lt(1)").trigger("click")):b.resetWarn($(this))}),a.on("change paste","input, select, textarea",function(a){b.resetWarn($(this))})},"undefined"!=typeof exports?exports.cfwValidaForm=b:a.cfwValidaForm=b}("undefined"!=typeof global?global:this);